
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tasmafaz Kiddies Shop</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Tasmafaz Store</h1>
        <p class="subtitle">HERE YOU MAY FIND LOTS OF KIDDIES PRODUCTS</p>
    </header>
    <main>
        <div class="products-container">
            <div class="product">
                <img src=""" alt="Teddy Bear">
                <h2>Teddy Bear</h2>
                <p>₦5,000</p>
                <h4>9 STOCK</h4>
                <button class="buy-btn">Buy Now</button>
                <button class="cart-btn">Add to Cart</button>
            </div>
            <div class="product">
                <img src="httsh.com/photo-1517841905240-472988babdf9?auto=format&fit=crop&w=400&q=80" alt="Kids Shoes">
                <h2>Kids Shoes</h2>
                <p>₦8,500</p>
                <h4>12 STOCK</h4>
                <button class="buy-btn">Buy Now</button>
                <button class="cart-btn">Add to Cart</button>
            </div>
            <div class="product">
                <img src="https://imag/photo-1503457574465-494bba506e52?auto=format&fit=crop&w=400&q=80" alt="Baby Dress">
                <h2>Baby Dress</h2>
                <p>₦7,200</p>
                <h4>7 STOCK</h4>
                <button class="buy-btn">Buy Now</button>
                <button class="cart-btn">Add to Cart</button>
            </div>
            <div class="product">
                <img src="https://ash.com/photo-1512436991641-6745cdb1723f?auto=format&fit=crop&w=400&q=80" alt="School Bag">
                <h2>School Bag</h2>
                <p>₦18,000</p>
                <h4>15 STOCK</h4>
                <button class="buy-btn">Buy Now</button>
                <button class="cart-btn">Add to Cart</button>
            </div>
            <div class="product">
                <img src="htsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=400&q=80" alt="Coloring Book">
                <h2>Coloring Book</h2>
                <p>₦1,200</p>
                <h4>25 STOCK</h4>
                <button class="buy-btn">Buy Now</button>
                <button class="cart-btn">Add to Cart</button>
            </div>
            <div class="product">
                <img src="https:/hoto-1519864600265-abb23847ef2c?auto=format&fit=crop&w=400&q=80" alt="Baby Oil">
                <h2>Baby Oil</h2>
                <p>₦2,000</p>
                <h4>20 STOCK</h4>
                <button class="buy-btn">Buy Now</button>
                <button class="cart-btn">Add to Cart</button>
            </div>
            <div class="product">
                <img src="https://images.unsplash.com/photo-1512436991641-6745cdb1723f?auto=format&fit=crop&w=400&q=80" alt="Kids T-Shirt">
                <h2>Kids T-Shirt</h2>
                <p>₦3,000</p>
                <h4>18 STOCK</h4>
                <button class="buy-btn">Buy Now</button>
                <button class="cart-btn">Add to Cart</button>
            </div>
            <div class="product">
                <img src=ash.com/photo-1519125323398-675f0ddb6308?auto=format&fit=crop&w=400&q=80" alt="Lego Set">
                <h2>Lego Set</h2>
                <p>₦15,000</p>
                <h4>10 STOCK</h4>
                <button class="buy-btn">Buy Now</button>
                <button class="cart-btn">Add to Cart</button>
            </div>
            <div class="product">
                <img src="https://ito-1464983953574-0892a716854b?auto=format&fit=crop&w=400&q=80" alt="Story Book">
                <h2>Story Book</h2>
                <p>₦2,500</p>
                <h4>30 STOCK</h4>
                <button class="buy-btn">Buy Now</button>
                <button class="cart-btn">Add to Cart</button>
            </div>
            <div class="product">
                <img src="http3457574465-494bba506e52?auto=format&fit=crop&w=400&q=80" alt="Puzzle">
                <h2>Puzzle</h2>
                <p>₦4,000</p>
                <h4>14 STOCK</h4>
                <button class="buy-btn">Buy Now</button>
                <button class="cart-btn">Add to Cart</button>
            </div>
            <div class="product">
                <img src="https://io-1519864600265-abb23847ef2c?auto=format&fit=crop&w=400&q=80" alt="Water Bottle">
                <h2>Water Bottle</h2>
                <p>₦1,800</p>
                <h4>22 STOCK</h4>
                <button class="buy-btn">Buy Now</button>
                <button class="cart-btn">Add to Cart</button>
            </div>
            <div class="product">
                <img src="https:hoto-1517841905240-472988babdf9?auto=format&fit=crop&w=400&q=80" alt="Kids Cap">
                <h2>Kids Cap</h2>
                <p>₦1,500</p>
                <h4>17 STOCK</h4>
                <button class="buy-btn">Buy Now</button>
                <button class="cart-btn">Add to Cart</button>
            </div>
            <div class="product">
                <img src="https://h.com/photo-1519125323398-675f0ddb6308?auto=format&fit=crop&w=400&q=80" alt="Faisal Doll">
                <h2> Doll</h2>
                <p>₦10,000</p>
                <h4>5 STOCK</h4>
                <button class="buy-btn">Buy Now</button>
                <button class="cart-btn">Add to Cart</button>
            </div>
            <div class="product">
                <img src="Set.html">
                <h2>Drawing Set</h2>
                <p>₦3,500</p>
                <h4>16 STOCK</h4>
                <button class="buy-btn">Buy Now</button>
                <button class="cart-btn">Add to Cart</button>
            </div>
            <div class="product">
                <img src="tps://images.unsplash.com/photo-1517841905240-472988babdf9?auto=format&fit=crop&w=400&q=80" alt="Kids Watch">
                <h2>Kids Watch</h2>
                <p>₦6,000</p>
                <h4>8 STOCK</h4>
                <button class="buy-btn">Buy Now</button>
                <button class="cart-btn">Add to Cart</button>
            </div>
        </div>
        <!-- CART SUMMARY SECTION -->
        <section class="checkout-summary" style="max-width:500px;margin:40px auto 0 auto;padding:20px;background:#fff;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,0.07);">
            <h2>Your Cart</h2>
            <ul>
                <!-- Cart items will be injected here by JS -->
            </ul>
            <p class="total"><strong>Total: </strong>₦0</p>
        </section>
        <div style="text-align:center; margin: 30px 0;">
            <a href="disturbant4life.html">
                <button class="buy-btn" style="font-size:1.1rem; padding: 12px 36px; margin-top: 10px;">
                    Go to Checkout
                </button>
            </a>
        </div>
    </main>
    <footer>
        <h2>&copy; 2025 Tasmafaz Kiddies Shop. All rights reserved.</h2>
        <h2>Contact Us @Tasmafaz@gmail.com</h2>
        <h2>0803595817</h2>
    </footer>
    <script>
window.addEventListener("DOMContentLoaded", function() {
    // --- STOCK MANAGEMENT WITH AUTO-RESTOCK ON CODE CHANGE ---
    let freshStockData = {};
    document.querySelectorAll(".product").forEach(function(productDiv) {
        const name = productDiv.querySelector("h2").innerText;
        const stockElem = productDiv.querySelector("h4");
        let stock = parseInt(stockElem.innerText);
        freshStockData[name] = isNaN(stock) ? 0 : stock;
    });

    let prevStockData = JSON.parse(localStorage.getItem("productStocks") || "{}");
    let needReset = false;
    for (let key in freshStockData) {
        if (freshStockData[key] !== prevStockData[key]) {
            needReset = true;
            break;
        }
    }
    if (needReset || Object.keys(prevStockData).length !== Object.keys(freshStockData).length) {
        localStorage.setItem("productStocks", JSON.stringify(freshStockData));
    }

    // Set the stock display from localStorage
    let stockData = JSON.parse(localStorage.getItem("productStocks") || "{}");
    document.querySelectorAll(".product").forEach(function(productDiv) {
        const name = productDiv.querySelector("h2").innerText;
        const stockElem = productDiv.querySelector("h4");
        stockElem.innerText = (stockData[name] ?? 0) + " STOCK";
    });

    // --- ADD TO CART & STOCK REDUCTION (allow multiple quantities) ---
    document.querySelectorAll(".product .cart-btn").forEach(function(btn) {
        btn.addEventListener("click", function(event) {
            event.preventDefault();
            const productDiv = btn.closest(".product");
            const name = productDiv.querySelector("h2").innerText;
            const price = productDiv.querySelector("p").innerText;
            const img = productDiv.querySelector("img").getAttribute("src");
            const stockElem = productDiv.querySelector("h4");

            let stockData = JSON.parse(localStorage.getItem("productStocks") || "{}");
            let stock = stockData[name];
            if (stock > 0) {
                let cart = JSON.parse(localStorage.getItem("cart") || "[]");
                const existing = cart.find(item => item.name === name && item.price === price);
                if (existing) {
                    existing.qty += 1;
                } else {
                    cart.push({ name, price, img, qty: 1 });
                }
                localStorage.setItem("cart", JSON.stringify(cart));
                // Reduce stock and update display
                stockData[name] = stock - 1;
                localStorage.setItem("productStocks", JSON.stringify(stockData));
                stockElem.innerText = (stock - 1) + " STOCK";
                renderCartSummary();
            } else {
                alert("Out of stock!");
            }
        });
    });

    // --- BUY NOW BUTTON REDIRECT ---
    document.querySelectorAll(".product .buy-btn").forEach(function(btn) {
        btn.addEventListener("click", function(event) {
            event.preventDefault();
            window.location.href = "disturbant4life.html";
        });
    });

    // --- CART SUMMARY & REMOVE BUTTON ---
    function renderCartSummary() {
        let cart = JSON.parse(localStorage.getItem("cart") || "[]");
        const summaryList = document.querySelector(".checkout-summary ul");
        const totalP = document.querySelector(".checkout-summary .total");
        summaryList.innerHTML = "";
        let total = 0;

        if (cart.length === 0) {
            summaryList.innerHTML = "<li>Your cart is empty.</li>";
            totalP.innerHTML = "<strong>Total: </strong>₦0";
        } else {
            cart.forEach((item, idx) => {
                summaryList.innerHTML += `<li data-idx="${idx}">
                    <img src="${item.img}" alt="${item.name}" style="width:32px;height:32px;vertical-align:middle;margin-right:8px;border-radius:4px;">
                    ${item.name} <span>${item.price}</span> x${item.qty}
                    <button class="remove-cart-btn" style="margin-left:10px;color:#fff;background:#d32f2f;border:none;padding:4px 10px;border-radius:4px;cursor:pointer;">Remove</button>
                </li>`;
                let priceNum = Number(item.price.replace(/[^\d.]/g, ""));
                total += priceNum * item.qty;
            });
            totalP.innerHTML = `<strong>Total: </strong>₦${total.toLocaleString()}`;
        }
    }

    renderCartSummary();

    // Remove from cart and restock
    document.querySelector(".checkout-summary ul").addEventListener("click", function(e) {
        if (e.target.classList.contains("remove-cart-btn")) {
            const li = e.target.closest("li");
            const idx = parseInt(li.getAttribute("data-idx"));
            let cart = JSON.parse(localStorage.getItem("cart") || "[]");
            let stockData = JSON.parse(localStorage.getItem("productStocks") || "{}");
            if (cart[idx]) {
                const name = cart[idx].name;
                const qty = cart[idx].qty || 1;
                stockData[name] = (stockData[name] || 0) + qty;
                localStorage.setItem("productStocks", JSON.stringify(stockData));
            }
            cart.splice(idx, 1);
            localStorage.setItem("cart", JSON.stringify(cart));
            renderCartSummary();
            // Update stock display on main page
            document.querySelectorAll(".product").forEach(function(productDiv) {
                const pname = productDiv.querySelector("h2").innerText;
                const stockElem = productDiv.querySelector("h4");
                if (stockData[pname] !== undefined) {
                    stockElem.innerText = stockData[pname] + " STOCK";
                }
            });
        }
    });
});
</script>
</body>

</html>

